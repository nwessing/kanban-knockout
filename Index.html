<!DOCTYPE html>
<html>
<head>
    <title>Kanban</title>
    <link rel="stylesheet" type="text/css" href="css/styles.css">

</head>
<body>
    <h2>KnockoutJS</h2>
    <div>
        <div class="third">
            <form data-bind="submit: addNewTask">
                <input type="text" placeholder="Task Name" data-bind="value: newTaskName"/> 
                <button type="submit">Add</button>
            </form>
        </div>
        <div class="third">
            <progress data-bind="attr: {max: totalTasks}, value: completeBoard.numTasks"></progress>
            <div class="center" >
                <span data-bind="text: percentComplete"></span>%
            </div>
        </div>
        <div class="third">
            <div class="trash" data-bind="dropzone: function () { }">
                Trash
            </div>
        </div>
    </div>

    <div>
        <div class="third" data-bind="template: { name: 'BoardTemplate', data: todoBoard }">
        </div>
        <div class="third" data-bind="template: { name: 'BoardTemplate', data: inProgressBoard }">
        </div>
        <div class="third" data-bind="template: { name: 'BoardTemplate', data: completeBoard }">
        </div>
    </div>

    <script type="text/javascript" src="js/lib/knockout-3.4.0.js"></script>
    <script type="text/javascript" src="js/viewmodels/KanbanViewModel.js"></script>
    <script type="text/javascript" src="js/bindings/ko.bindingHandlers.dragging.js"></script>

    <script> 
        document.addEventListener('DOMContentLoaded', function () {
            var todo = [
                { title: "Allow the user to create new tasks." },
                { title: "Show number of tasks on each board next to board title." },
                { title: "Add a trash can drop area where tasks can be discarded." },
                { title: "Add a progress bar showing how many tasks are complete over total tasks." },
                { title: "Create a template to encapsulate a board." }
            ];
            var inProgress = [];
            var complete = [
                { title: "Learn about KnockoutJS." }
            ];
            var vm = new KanbanViewModel(todo, inProgress, complete);
            ko.applyBindings(vm);
        });
    </script>

    <script id="BoardTemplate" type="text/html">
        <h3 class="center"><span data-bind="text: name"></span> (<span data-bind="text: numTasks"></span>)</h3>
        <div class="board" data-bind="dropzone: addTask, foreach: tasks">
            <div class="task" data-bind="draggable: { data: $data, onMove: $parent.removeTask }, text: title"> </div>
        </div>
    </script>
</body>
</html>
